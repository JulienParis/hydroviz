
<!-- cf tutorial : http://seegatesite.com/create-simple-cool-sidebar-menu-with-bootstrap-3/  -->
<!-- cf glyphicons : http://fontawesome.io/icons/  -->

<style>
  /* Toggle Styles */

  element {
    --width-sidebar: 150px;
  }

  #wrapper {
     padding-left: 0;
     -webkit-transition: all 0.5s ease;
     -moz-transition: all 0.5s ease;
     -o-transition: all 0.5s ease;
     transition: all 0.5s ease;
     overflow: hidden;
  }
  #wrapper.toggled {
     padding-left: 200px;
     overflow: scroll;
  }
  #sidebar-wrapper {
     z-index: 1000;
     position: absolute;
     left: 300px;
     width: 0;
     height: 60%;
     margin-top:  5%;
     margin-left: -300px;
     overflow-y: auto;
     overflow-x: hidden;
     background: {{ app_colors.navbar }};
     -webkit-transition: all 0.5s ease;
     -moz-transition: all 0.5s ease;
     -o-transition: all 0.5s ease;
     transition: all 0.5s ease;
  }
  #wrapper.toggled #sidebar-wrapper {
     width: 300px;
  }
  #page-content-wrapper {
     position: absolute;
     padding: 15px;
     width: 100%;
     overflow-x: hidden;
  }
  .xyz{
     min-width: 360px;
  }
  #wrapper.toggled #page-content-wrapper {
     position: relative;
     margin-right: 0px;
  }
  .fixed-brand{
     width: auto;
  }
  /* Sidebar Styles */
  .sidebar-nav {
     position: absolute;
     top: 0;
     width: 300px;
     margin: 0;
     padding: 0;
     list-style: none;
     margin-top: 0px;
  }
  .sidebar-nav li {
     text-indent: 15px;
     line-height: 40px;
  }
  .sidebar-nav li a {
     display: block;
     text-decoration: none;
     color: #fff;
  }
  .sidebar-nav li a:hover {
     text-decoration: none;
     color: #fff;
     /*background: rgba(255,255,255,0.2);*/
     border-left: white 2px solid;
  }
  .sidebar-nav li a:active,
  .sidebar-nav li a:focus {
     text-decoration: none;
  }
  .sidebar-nav > .sidebar-brand {
     height: 65px;
     font-size: 18px;
     line-height: 60px;
  }
  .sidebar-nav > .sidebar-brand a {
     color: #fff;
  }
  .sidebar-nav > .sidebar-brand a:hover {
     color: #fff;
     background: none;
  }
  .no-margin{
     margin:0;
  }

  @media(min-width:700px) {
     #wrapper {
         padding-left: 300px;
     }
     .fixed-brand{
         width: 150px;
     }
     #wrapper.toggled {
         padding-left: 0;
     }
     #sidebar-wrapper {
         width: 300px;
     }
     #wrapper.toggled #sidebar-wrapper {
         width: 300px;
     }
     #wrapper.toggled-2 #sidebar-wrapper {
         width: 50px;
     }
     /* main width size */
     #wrapper.toggled-2 #sidebar-wrapper:hover {
         width: 300px;
     }
     #page-content-wrapper {
         padding: 20px;
         position: relative;
         -webkit-transition: all 0.5s ease;
         -moz-transition: all 0.5s ease;
         -o-transition: all 0.5s ease;
         transition: all 0.5s ease;
     }
     #wrapper.toggled #page-content-wrapper {
         position: relative;
         margin-right: 0;
         padding-left: 300px;
     }
     #wrapper.toggled-2 #page-content-wrapper {
         position: relative;
         margin-right: 0;
         margin-left: -200px;
         -webkit-transition: all 0.5s ease;
         -moz-transition: all 0.5s ease;
         -o-transition: all 0.5s ease;
         transition: all 0.5s ease;
         width: auto;
     }
  }

  .dropdown-menu a {
    color : grey !important;
    /*display: block;*/
  }
  .dropdown-menu a:hover{
    color : skyblue !important;
  }

  .indent1 {
    padding-left: 10pt;
    }
  .indent2 {
    padding-left: 20pt;
    }

  #slider_years{
    margin-left: 10px;
    margin-right: 10px;
    padding: 0px;
  }
  #annee_selected{
    color: white;
  }
</style>



<nav class="navbar no-margin" id="navbar-text" >
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="navbar-header fixed-brand">

      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" id="menu-toggle">
        <span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>
      </button>

      <a class="navbar-brand" href="">
        {{ app_metas.title }}
      </a>

  </div><!-- navbar-header-->

  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

    <ul class="nav navbar-nav">


      <li>
        <a
        class="bstooltip" data-toggle="tooltip" data-placement="bottom"
        title="A quoi sert HydroViz ?"
        >
          <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>

        </a>
      </li>



      <li
        class="bstooltip active" data-toggle="tooltip" data-placement="bottom"
        title="montrer les options de représentations cartographiques des pesticides"
      >
        <button class="navbar-toggle collapse in" data-toggle="collapse" id="menu-toggle-2">
          <span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>
          <!-- filtres -->
        </button>
      </li>


      <li
        class="bstooltip active" data-toggle="tooltip" data-placement="bottom"
        title="choisir une année"
      >
        <form class="navbar-form navbar-left"
              role="slider"
        >
            <div class="row">
              <label class="" for="slider_years">
                Années
              </label>
              <div class="input-group">
              <input class="form-control" type="range" min="2007" max="2012" value="2007" step="1" id="slider_years">
              <output class="" for="slider_years" id="annee_selected">
                2007
              </output>
            </div>
          </div>

        </form>
      </li>


    </ul>




    <ul class="nav navbar-nav navbar-right">


      <li>
        <a
        class="bstooltip" data-toggle="tooltip" data-placement="bottom"
        title="Méthodologie"
        >
          <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>

        </a>
      </li>



      <li>
        <a
          class="bstooltip" data-toggle="tooltip" data-placement="bottom"
          title="Lexiques"
          >
          <span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span>

        </a>
      </li>


      <li>
        <a
        class="bstooltip" data-toggle="tooltip" data-placement="bottom"
        title="Plus de ressources pour s'informer sur la pollution aux pesticides"
        >
          <span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span>

        </a>
      </li>

      <!-- <li>
        <form class="navbar-form navbar-left" role="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="">
          </div>
          <button type="submit" class="btn">
            <i class="fa fa-search" area-hidden="true"></i>
          </button>
        </form>
      </li> -->

      <li>
        <a>
          <span class="glyphicon glyphicon-option-vertical" aria-hidden="true"></span>
        </a>
      </li>



      <li>
        <a
        class="bstooltip" data-toggle="tooltip" data-placement="bottom"
        title="Infos sur licences des bases de données et les programmes utilisés"
        >
          <span class="glyphicon glyphicon-copyright-mark" aria-hidden="true"></span>

        </a>
      </li>


      <li>
        <a  href="https://gitlab.com/Julien_P/concours_pesticides" target="_blank"
            class="bstooltip" data-toggle="tooltip" data-placement="bottom"
            title="repo Gitlab"
        >
          <i class="fa fa-gitlab fa-lg" area-hidden="true"></i>
        </a>
      </li>

      <li>
        <a  href="https://twitter.com/jparis_py" target="_blank"
            class="bstooltip" data-toggle="tooltip" data-placement="bottom"
            title="sur Twitter"
        >
          <i class="fa fa-twitter fa-lg" area-hidden="true"></i>
        </a>
      </li>


      <li> <a></a> </li>
    </ul>



  </div><!-- bs-example-navbar-collapse-1 -->

</nav>




<!-- Sidebar -->

<div id="wrapper" class="toggled-2">

  <div id="sidebar-wrapper">

    <ul class="sidebar-nav nav-pills nav-stacked" id="menu">

      <!-- <li>
        <button class="navbar-toggle collapse" data-toggle="collapse" id="menu-toggle-2">
          <span aria-hidden="true">&times;</span>
        </button>
      </li> -->

      <br>

      <li
        class="bstooltip" data-toggle="tooltip" data-placement="bottom"
        title="répartition des pesticides sur toute la France"
      >
        <a role="button"
            class="switchtree"
            reqvalue="TOT_FRANCE"
            data-toggle="modal"
            data-target="#mod_pest"
            >
          <span class="fa-stack fa-lg pull-left"><i class="fa fa-dashboard fa-stack-1x" aria-hidden="true"></i></span>
          <strong
          >
            Pesticides - toute la France
          </strong>
        </a>
      </li>

      <hr>

      <li
        class="bstooltip" data-toggle="tooltip" data-placement="bottom"
        title="voir les niveaux de concentrations totales moyennes des pesticides sur toute la France"
      >
        <a role="button" class="switchmap" reqtype="MOYPTOT" reqvalue="XXXXXX" >
          <span class="fa-stack fa-lg pull-left"><i class="fa fa-bar-chart fa-stack-1x" aria-hidden="true"></i></span>
          Concentrations totales
        </a>
      </li>

      <hr>
      <hr>


      <!-- <li>

        <a role="button" data-toggle="collapse" data-target="#collapseAnnees" aria-expanded="false" aria-controls="collapseAnnees">
          <span class="fa-stack fa-lg pull-left"><i class="fa fa-calendar fa-stack-1x" aria-hidden="true"></i></span>
          <strong>Années</strong>
          <span class="caret"></span>
        </a>

        <div class="collapse" id="collapseAnnees">
          <hr>
          % for annee in var_dict.annees %
            <a href="#" class="request indent2" reqtype="year" reqvalue="{{ annee }}" >{{ annee }}</a>
          % endfor %
        </div>

      </li> -->

      <!-- <hr> -->

      <!-- <li>

        <a role="button" data-toggle="collapse" data-target="#collapsePesticides" aria-expanded="false" aria-controls="collapsePesticides">
          <span class="fa-stack fa-lg pull-left"><i class="fa fa-warning fa-stack-1x" aria-hidden="true"></i></span>
          <strong>Pesticides (nombre)</strong>
          <span class="caret"></span>
        </a>

        <div class="collapse" id="collapsePesticides">

          <hr>

          <a class="indent1" role="button" data-toggle="collapse" data-target="#collapseFonctions" aria-expanded="false" aria-controls="collapseFonctions">
            par fonctions <span class="caret"></span>
          </a>
          <div class="collapse" id="collapseFonctions">
            {% for fonction in var_dict.pest_fonctions|sort %}
              <a href="#" class="switchmap indent2" reqtype="FUNCTIONS" reqvalue="{{ fonction }}" > > {{ fonction }} - {{ var_dict.pest_fonc_lib[fonction]|safe }}</a>
            {% endfor %}
          </div>

          <a class="indent1" role="button" data-toggle="collapse" data-target="#collapseDangers" aria-expanded="false" aria-controls="collapseDangers">
            par dangerosité <span class="caret"></span>
          </a>
          <div class="collapse" id="collapseDangers">
            {% for danger in var_dict.pest_danger_types|sort %}
              <a href="#" class="switchmap indent2" reqtype="TYPES" reqvalue="{{ danger }}" > > {{ danger }} - </a>
            {% endfor %}
          </div>

          <a class="indent1" role="button" data-toggle="collapse" data-target="#collapseFamilles" aria-expanded="false" aria-controls="collapseFamilles">
            par familles <span class="caret"></span>
          </a>
          <div class="collapse" id="collapseFamilles">
            {% for famille in var_dict.pest_familles|sort %}
              <a href="#" class="switchmap indent2" reqtype="FAMILLES" reqvalue="{{ famille }}" > > {{ famille }} </a>
            {% endfor %}
          </div>


        </div>

      </li> -->


      <li
        class="bstooltip" data-toggle="tooltip" data-placement="bottom"
        title="sélectionner une FONCTION de pesticides pour voir le nombre de pesticides correspondants détectés"
      >

        <a role="button" data-toggle="collapse" data-target="#collapseFonctions" aria-expanded="false" aria-controls="collapseFonctions">
          <span class="fa-stack fa-lg pull-left"><i class="fa fa-gear fa-stack-1x" aria-hidden="true"></i></span>
          <strong>Fonctions (nombre)</strong>
          <span class="caret"></span>
        </a>

        <div class="collapse" id="collapseFonctions">
          {% for fonction in var_dict.pest_fonctions|sort %}
            <a href="#" class="switchmap indent1" reqtype="FUNCTIONS" reqvalue="{{ fonction }}" > > {{ fonction }} - {{ var_dict.pest_fonc_lib[fonction]|safe }}</a>
          {% endfor %}
        </div>

      </li>

      <hr>

      <li
        class="bstooltip" data-toggle="tooltip" data-placement="bottom"
        title="sélectionner une FAMILLE de molécules pour voir le nombre de pesticides correspondants détectés"
      >

        <a role="button" data-toggle="collapse" data-target="#collapseFamilles" aria-expanded="false" aria-controls="collapseFamilles">
          <span class="fa-stack fa-lg pull-left"><i class="fa fa-dot-circle-o fa-stack-1x" aria-hidden="true"></i></span>
          <strong>Familles (nombre)</strong>
          <span class="caret"></span>
        </a>

        <div class="collapse" id="collapseFamilles">
          {% for famille in var_dict.pest_familles|sort %}
            <a href="#" class="switchmap indent1" reqtype="FAMILLES" reqvalue="{{ famille }}" > > {{ famille }} </a>
          {% endfor %}
        </div>

      </li>

      <hr>

      <li
        class="bstooltip" data-toggle="tooltip" data-placement="bottom"
        title="sélectionner un type de DANGEROSITE de pesticides pour voir le nombre de pesticides correspondants détectés"
      >

        <a role="button" data-toggle="collapse" data-target="#collapseDangers" aria-expanded="false" aria-controls="collapseDangers">
          <span class="fa-stack fa-lg pull-left"><i class="fa fa-warning fa-stack-1x" aria-hidden="true"></i></span>
          <strong>Dangerosité (nombre)</strong>
          <span class="caret"></span>
        </a>

        <div class="collapse" id="collapseDangers">
          {% for danger in var_dict.pest_danger_types|sort %}
            <a href="#" class="switchmap indent1" reqtype="TYPES" reqvalue="{{ danger }}" > > {{ danger }} - </a>
          {% endfor %}
        </div>

      </li>

      <hr>

      <!-- <hr> -->

      <!-- <li>

        <a role="button" data-toggle="collapse" data-target="#collapseDpts" aria-expanded="false" aria-controls="collapseDpts">
          <span class="fa-stack fa-lg pull-left"><i class="fa fa-map-o fa-stack-1x" aria-hidden="true"></i></span>
          <strong>Départements</strong>
          <span class="caret"></span>
        </a>

        <div class="collapse" id="collapseDpts">
          <hr>
          {% for dpt in var_dict.departements|sort %}
            <a href="#" class="request indent2" reqtype="dpt" reqvalue="{{ dpt }}" >{{ dpt }} - {{ var_dict.departements[dpt]["dpt_name"] }}</a>
          {% endfor %}
        </div>

      </li> -->

      <hr>

      <br>

    </ul>

  </div><!-- /#sidebar-wrapper -->

</div> <!-- end #wrapper -->




<script>

  $("#menu-toggle").click(function(e) {
    e.preventDefault();
    $("#wrapper").toggleClass("toggled");
  });

  $("#menu-toggle-2").click(function(e) {
    e.preventDefault();
    $("#wrapper").toggleClass("toggled-2");
    //$('#menu ul').hide();
  });

  $("#sidebar-wrapper").mouseleave(
    function() {
      //console.log("--leaving menu ...");
      $(this).find(".collapse").collapse('hide');
    }
  );

  // $(".dropdown-toggle").hover(
  //   function(){ $(this).removeClass('open') }
  // );

  // function initMenu() {
  //   $('#menu ul').hide();
  //   $('#menu ul').children('.current').parent().show();
  //   //$('#menu ul:first').show();
  //
  //   $('#menu li a').click(
  //     function() {
  //       var checkElement = $(this).next();
  //       if((checkElement.is('ul')) && (checkElement.is(':visible'))) {
  //         checkElement.slideUp('normal');
  //         return false;
  //       }
  //       if((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
  //         $('#menu ul:visible').slideUp('normal');
  //         checkElement.slideDown('normal');
  //         return false;
  //       }
  //     }
  //   );
  // }

  //$(document).ready(function() {initMenu();});

</script>
